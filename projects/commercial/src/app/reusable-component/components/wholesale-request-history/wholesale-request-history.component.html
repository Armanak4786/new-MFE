<div class="mt-3">
  <div class="flex flex-wrap align-items-center gap-3 w-full">
    <text
      [mode]="'label'"
      [label]="'request_history'"
      [labelClass]="'label-xs font-bold'"
    ></text>
    <!-- Facility -->
    <div
      class="flex align-items-center"
      *ngIf="facilityType !== 'Floating Floorplan'"
    >
      <label class="text-xs whitespace-nowrap text-center">
        {{ "views" | translate }}:
      </label>
      <p-dropdown
        [options]="all_requests"
        [(ngModel)]="selectedRequest"
        placeholder="Select an option"
        (onChange)="onRequestChange($event)"
      ></p-dropdown>
    </div>
    <div
      class="flex align-items-center"
      *ngIf="
        !selectedSubFacility?.facilityName?.trim() &&
        facilityType === 'Floating Floorplan'
      "
    >
      <label class="text-xs whitespace-nowrap text-center">
        {{ "Facility" | translate }}:
      </label>
      <p-dropdown
        placeholder="Select an option"
        [options]="selectedSubFacilityList"
        (onChange)="onSubFacilityChange($event)"
      ></p-dropdown>
    </div>

    <!-- Facility Type -->
    <div
      class="flex items-center align-items-center"
      *ngIf="selectedRequest !== 'drawdown'"
    >
      <label class="text-xs text-center inline-block mr-2">
        {{ "type" | translate }}:
      </label>
      <p-dropdown
        placeholder="Select an option"
        [options]="wholesaleFloatingDropdown || transformedSwapRequestList"
        [(ngModel)]="selectedType"
        (onChange)="onTypeChange($event)"
      ></p-dropdown>
    </div>
    <!-- Payment Option -->
    <div
      class="flex items-center align-items-center"
      *ngIf="this.selectedType === 'repayment'"
    >
      <label class="text-xs text-center inline-block mr-2">
        {{ "payment_option" | translate }}:
      </label>
      <p-dropdown
        placeholder="Select an option"
        [options]="payment_option_list"
        [(ngModel)]="selectedPaymentOption"
        (onChange)="onPaymentOptionChange($event)"
      ></p-dropdown>
    </div>

    <!-- View Button -->
    <div class="btn-uniform">
      <gen-button [btnLabel]="'view'" [btnWidth]="'full'" (onClick)="search()"></gen-button>
    </div>

    <!-- Reset Button -->
    <div class="btn-uniform">
      <gen-button
        [btnLabel]="'reset'"
        [btnType]="'border-btn'"
        [btnWidth]="'full'"
        (onClick)="reset()"
        class="reset-btn-color"
      ></gen-button>
    </div>
    <div
      *ngIf="
        selectedType === 'drawdown' &&
        contractStatus &&
        (contractStatus === 'Restructure Creation' ||
          contractStatus === 'Awaiting Credit Referral') &&
        facilityType === 'Floating Floorplan'
      "
    >
      <text
        [mode]="'label'"
        [value]="contractStatus"
        [labelClass]="'text-xs flex whitespace-nowrap'"
        [label]="'Drawdown Status:'"
        [valueClass]="'text-xs flex'"
      ></text>
    </div>

    <!-- Export & Print on far right -->
    <div class="flex justify-content-end gap-1 ml-auto">
      <gen-button
        [btnType]="'non-bg-btn'"
        [btnLabel]="'export'"
        class="text-xs"
        [btnIcon]="'pi pi-cloud-upload'"
        [iconPos]="'left'"
        (click)="export()"
      ></gen-button>
      <gen-button
        [btnType]="'non-bg-btn'"
        [btnLabel]="'print'"
        class="text-xs"
        [btnIcon]="'pi pi-print'"
        [iconPos]="'left'"
        (click)="onPrint()"
      ></gen-button>
    </div>
  </div>
</div>
<div
  class="mt-2"
  *ngIf="ws_request_history_datalist?.length || task_api_response?.length"
>
  <gen-table
    #dt
    [columns]="merge_header_list || ws_request_history_columnDefs"
    [dataList]="
      merge_data_list || ws_request_history_datalist || task_api_response
    "
    [tableClass]="'border-round'"
    [tableStyle]="'stripped-rows'"
    [paginatorFlag]="true"
    [sortable]="true"
    [filter]="true"
    [bodyClass]="'text-xs'"
    [headingClass]="'tableHeader text-xs  header-text-color'"
    [sortField]="'id'"
    (onCellClick)="onCellClick($event)"
  >
  </gen-table>
</div>
