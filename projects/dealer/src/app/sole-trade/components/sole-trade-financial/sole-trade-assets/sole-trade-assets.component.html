<!-- <base-form
  #mainForm
  [formConfig]="formConfig"
  [mode]="mode"
  [id]="id"
  [data]="data"
  (valueChanges)="onValueChanges($event)"
  (formEvent)="onFormEvent($event)"
  (formButtonEvent)="onButtonClick($event)"
  (formReady)="onFormReady()"
>
</base-form> -->
<!-- [headerText]="'Asset Details'" -->
<gen-card  [cardBgColor]="'--background-color-secondary'" [cardType]="'non-border'">
<ng-container body>
    <div class="grid">
      <label class="assetTypelabel mb-3 col-6 text-size-12" style="color: var(--label-color)">Asset Type</label>
      <label class="assetTypelabel col-5 text-size-12 text-center" style="color: var(--label-color)">Amount</label>
    </div>
    <form [formGroup]="assetDetailsForm" [class.disabled]="isDisabled()" class="sole-trade-asset-details-form">
      <div formArrayName="assetDetails">
        <div *ngFor="let asset of assetDetails.controls; let i = index" [formGroupName]="i">
          <div class="grid">
            <div class="col-6 align-content-center">
              <div class="grid">
                <div class="mt-3 mb-2 col-6">
                  <span class="label-text" *ngIf="i <= 2" style="color: var(--label-color)">{{
                    asset.get("assestType").value
                    }}
                    <!-- <span class="text-red-500">* </span> -->
                  </span>
                    <span class="label-text" *ngIf="i > 2" style="color: var(--label-color)">{{
                      assetDescriptionMapId.get(asset.get("assestType").value)
                      }}
                      <!-- <span class="text-red-500">* </span> -->
                    </span>
                </div>
                <div class="col-5 dropdown-allignment">
                  @if(i==0){
                  <p-dropdown formControlName="assestHomeOwnerType" [options]="own" optionLabel="label"
                    optionValue="value" placeholder="Ownership Type" (onChange)="updateAssetDetails(i)"></p-dropdown>
                  <div class="p-error" *ngIf="
                      asset.get('assestHomeOwnerType')?.invalid &&
                      asset.get('assestHomeOwnerType')?.touched
                    ">
                    <small style="text-wrap: nowrap" *ngIf="asset.get('assestHomeOwnerType').errors?.required">Ownership
                      Type is required.</small>
                  </div>
                  }
                </div>
              </div>
            </div>
            <div class="mt-1 pb-4 col-5 p-fluid">
              <amount
                [inputStyle]="{ 'text-align': 'right' }"
                formControlName="amount"
                [value]="amount"
                [mode]="label"
                [fractionDigits]="4"
                [maxFractionDigits]="4"
                (ngModelChange)="updateAssetDetails(i)"
              ></amount>
              <!-- <p-inputNumber 
                [inputStyle]="{ 'text-align': 'right' }" 
                inputId="currency-us" 
                mode="decimal"
                [minFractionDigits]="0"
                [maxFractionDigits]="4"
                [min]="0"
                [max]="999999999999999999.9999"
                locale="en-US" 
                formControlName="amount"
                (ngModelChange)="updateAssetDetails(i)"
              /> -->

              <div class="p-error" *ngIf="
                  asset.get('amount')?.invalid &&
                  (asset.get('amount')?.touched || asset.get('amount')?.dirty)
                ">
                <small *ngIf="asset.get('amount').errors?.required">Amount is required.</small>
                <small *ngIf="asset.get('amount').errors?.min">Amount should be greater than 0.</small>
                <small *ngIf="asset.get('amount').errors?.max">Amount cannot exceed (18,4)</small>
              </div>
            </div>
            <div class="col-1 text-center">
              <gen-button [btnType]="'non-bg-btn'" [btnIcon]="'fa-regular fa-trash-can text-lg'" [btnColor]="'danger'"
                (onClick)="deleteRow(i)" [disabled]="i <= 2">Delete</gen-button>
            </div>
          </div>
        </div>
      </div>
      <div class="grid">
        <div class="col-6 p-fluid">
          <p-dropdown formControlName="financialAssetType" [options]="asssetTypeOptions" optionLabel="label"
            optionValue="value" placeholder="Asset Type" [appendTo]="'body'"></p-dropdown>
        </div>
        <div class="col-5 p-fluid">
          <!-- <amount
            inputId="currency-add-us" 
            mode="decimal"
            locale="en-US" 
            formControlName="financialAssetTypeAmount"
          >
          </amount> -->
          
          <p-inputNumber 
            [inputStyle]="{ 'text-align': 'right' }" 
            inputId="currency-add-us" 
            mode="decimal"
            [minFractionDigits]="0"
            [maxFractionDigits]="4"
            [min]="0"
            [max]="999999999999999999.9999"
            locale="en-US" 
            formControlName="financialAssetTypeAmount"
          />
          <!-- Add validation error display for financialAssetTypeAmount -->
          <div class="p-error" *ngIf="
              assetDetailsForm.get('financialAssetTypeAmount')?.invalid &&
              (assetDetailsForm.get('financialAssetTypeAmount')?.touched || assetDetailsForm.get('financialAssetTypeAmount')?.dirty)
            ">
            <small *ngIf="assetDetailsForm.get('financialAssetTypeAmount').errors?.required">Amount is required.</small>
            <small *ngIf="assetDetailsForm.get('financialAssetTypeAmount').errors?.min">Amount should be greater than 0.</small>
            <small *ngIf="assetDetailsForm.get('financialAssetTypeAmount').errors?.max">Amount cannot exceed (18,4)</small>
          </div>
        </div>
        <div class="col-1 text-center">
          <gen-button [btnType]="'bg-btn'" [btnIcon]="'pi pi-angle-right text-lg'" (click)="addRow()"></gen-button>
        </div>
      </div>
    </form>
  </ng-container>
  </gen-card>
