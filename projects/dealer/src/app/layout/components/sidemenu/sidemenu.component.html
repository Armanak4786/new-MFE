<div class="layout-sidemenu">
    <nav class="sidebar" [ngClass]="{ expanded: isExpanded || isLocked }" (mouseleave)="onMouseLeave()"
        (mouseenter)="onMouseEnter()">
        <ul>
            <li (click)="onIconClick('menu')" class="nav-item">
                <i class="fa fa-bars"></i>
                <span class="icon-label" *ngIf="isExpanded || isLocked">Menu</span>
                <button class="lock-button" (click)="toggleLock()" *ngIf="isExpanded">
                    <i [ngClass]="{
              'fa-solid fa-lock': isLocked,
              'fa fa-unlock-alt': !isLocked
            }"></i>
                </button>
            </li>
            <li (click)="navigate('/dashboard')" class="nav-item">
                <i class="fa-solid fa-wallet"></i>
                <span class="icon-label" *ngIf="isExpanded || isLocked">Dashboard</span>
            </li>
            <li (click)="navigate('/standard-quote')" class="nav-item">
                <i class="fas fa-line-chart"></i>
                <span class="icon-label" *ngIf="isExpanded || isLocked">Standard quote</span>
            </li>
            <!-- <li (click)="onIconClick('settings')" class="nav-item">
        <i class="fa fa-cog"></i>
        <span class="icon-label" *ngIf="isExpanded || isLocked">Settings</span>
      </li> -->
            <li (click)="navigate('/quick-quote')" class="nav-item">
                <i class="fa-solid fa-bag-shopping"></i>
                <span class="icon-label" *ngIf="isExpanded || isLocked">Quick Quote</span>
            </li>
            <!-- <li (click)="onIconClick('database')" class="nav-item">
        <i class="fa-solid fa-coins"></i>
        <span class="icon-label" *ngIf="isExpanded || isLocked"
          >Quote Listing</span
        >
      </li>
      <li (click)="onIconClick('database')" class="nav-item">
        <i class="fa-solid fa-coin-blank"></i>
        <span class="icon-label" *ngIf="isExpanded || isLocked">Finance</span>
      </li> -->
            <li (click)="toggleSubmenu()" class="nav-item">
                <i class="fa-regular fa-chart-bar"></i>
                <span class="icon-label" *ngIf="isExpanded || isLocked">Reports</span>
            </li>

            <app-sub-sidemenu *ngIf="isSubmenuOpen" class="sub-sidemenu"
                [ngClass]="{ expanded: isExpanded || isLocked }" [isExpanded]="isExpanded || isLocked"
                (closeSubmenu)="closeSubmenu()" (navigate)="navigate($event)">
            </app-sub-sidemenu>
        </ul>

        <!-- Portal Selector at Bottom -->
        <div class="portal-selector-container" (click)="togglePortalMenu($event)">
            <div class="portal-selector">
                <img [src]="selectedPortal.icon" alt="" class="portal-icon" />
                <div class="portal-info" *ngIf="isExpanded || isLocked">
                    <span class="portal-title">{{ selectedPortal?.name }}</span>
                    <span class="portal-subtitle">ACTIVE WORKSPACE</span>
                </div>
                <i class="fa fa-chevron-up portal-arrow" *ngIf="isExpanded || isLocked" [class.rotated]="isPortalMenuOpen"></i>
            </div>
            
            <div class="portal-menu" *ngIf="isPortalMenuOpen && (isExpanded || isLocked)">
                <div class="portal-menu-item" 
                     *ngFor="let portal of portalOptions" 
                     (click)="selectPortal(portal, $event)"
                     [class.active]="portal.code === selectedPortal.code">
                    <img [src]="portal?.icon" alt="" class="portal-icon" />
                    <div class="portal-info">
                        <span class="portal-title">{{ portal?.name }}</span>
                        <span class="portal-subtitle">{{ portal?.description }}</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>