<ng-container body>
  <!-- <gen-table [columns]="columns" [headingClass]="'font-medium text-500'" [dataList]="dataList"
    [rowHeight]="12"></gen-table> -->

  <!-- <p-table [columns]="columns" [value]="dataList">
    <ng-template pTemplate="header" let-col>
      <tr>
        <th *ngFor="let cl of col">
          {{ cl.headerName }}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        <td>{{ rowData.checklist }}</td>
        <td class="p-fluid col-2 todo-status {{ rowData.status ? 'todocompleted' : 'todopending'}}">
          <p-dropdown [(ngModel)]="rowData.status" [options]="options" appendTo="body">
          </p-dropdown>
        </td>
        <td class="w-10rem">{{ rowData.noteDiscrpition || '-'}}</td>
        <td>{{ rowData.assignee || '-'}}</td>
      </tr>
    </ng-template>
  </p-table> -->

  <form [formGroup]="additionalApprovalForm">
    <div class="todo-table">
      <p-table
        [value]="
          additionalApprovalForm?.controls.additionalApprovalFormArray.controls
        "
        dataKey="id"
        class="custom-sub-table additionalDocument"
        tableStyle="p-datatable-striped"
      >
        <ng-template pTemplate="header">
          <tr class="todoheader">
            <!-- <th></th> -->
            <th>Checklist</th>
            <th>Status</th>
            <th>Notes</th>
            <th>Assign To</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-container formArrayName="additionalApprovalFormArray">
          <ng-template pTemplate="body" let-todo let-index="rowIndex">
            <tr class="custom-body-row row-alignment" [formGroupName]="index">
              <td class="col-4">
                <!-- {{hello(todo.value.uploaded)}} -->
                @if (!(todo.value.workflowTodoId>0)){
                <input
                  type="text"
                  class="text-overflow-class"
                  pInputText
                  formControlName="checklist"
                />
                }@else {
                {{ todo?.value?.checklist }}
                <span class="text-red-500" *ngIf="todo.get('mandetory').value"
                  >*</span
                >
                }
              </td>
              <!-- [regexPattern]="'[^a-zA-Z0-9]*'"  -->
              <td
                class="p-fluid col-2 todo-status {{
                  todo.value.status ? 'todocompleted' : 'todopending'
                }}"
              >
                <p-dropdown
                  formControlName="status"
                  [options]="statusOptions"
                  appendTo="body"
                  [readonly]="todo.value.status && todo.value.uploaded"
                >
                </p-dropdown>
              </td>
              <td class="col-4">
                @if (!((todo.value.workflowTodoId>0) && todo.value.uploaded)){
                <input
                  type="text"
                  class="text-overflow-class"
                  pInputText
                  formControlName="noteDiscrpition"
                />
                }@else {
                {{ todo?.value?.noteDiscrpition }}
                }
              </td>
              <!-- [regexPattern]="'[^a-zA-Z0-9]*'"  -->
              <td class="p-fluid col-2">
                <!-- <p-calendar formControlName="deferDate" [showIcon]="true"
                                [iconDisplay]="'input'" dateFormat="yy/mm/dd" appendTo="body">
                            </p-calendar> -->
                @if (!(todo.value.workflowTodoId>0)){
                <p-dropdown
                  class=""
                  formControlName="assignTo"
                  (onClick)="clearSearchFilter(dropdown)"
                  [options]="assignOptions"
                  appendTo="body"
                >
                </p-dropdown>
                }@else {
                {{ todo?.value?.assignTo || "assignee" }}
                }
              </td>
              <td>
                <gen-button
                  [btnLabel]="'OK'"
                  [rounded]="true"
                  (click)="onOkBoxClicked(index, $event)"
                  class="todo-btn"
                  [disabled]="
                    todo.status == 'INVALID' ||
                    (todo?.value?.workflowTodoId > 0 && todo?.value?.uploaded)
                  "
                >
                </gen-button>
              </td>
            </tr>
          </ng-template>
        </ng-container>
      </p-table>
    </div>
  </form>
  <div class="justify-content-start mr-auto mt-2">
    <gen-button
      [btnType]="'plus-btn'"
      [btnLabel]="'Add To Do'"
      [rounded]="true"
      [className]="'buttonChange'"
      (click)="incrementAdditionalList()"
    >
    </gen-button>
  </div>
</ng-container>
