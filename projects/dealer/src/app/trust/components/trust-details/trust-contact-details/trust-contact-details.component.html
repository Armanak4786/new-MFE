<gen-card [headerText]="'Contact Details'" [cardBgColor]="'--background-color-secondary'" [cardType]="'non-border'">
  <ng-container body>
    <div class="grid p-0 m-0">
      <div class="col-4 pl-0 mt-0 pt-0">
          <!-- <base-form
          #mainForm
          [formConfig]="formConfig"
          [mode]="mode"
          [id]="id"
          [data]="data"
          (valueChanges)="onValueChanges($event)"
          (formEvent)="onFormEvent($event)"
          (formButtonEvent)="onButtonClick($event)"
          (formReady)="onFormReady()"
        >
        </base-form> -->
        <form [formGroup]="phoneForm" class="contact-details-form">
          <ng-container formArrayName="phone">
            <div *ngFor="let phone of phone.controls; let i = index">
              <div [formGroupName]="i" class="mt-3">
                <span class="p-float-label -ml-2">
                  <label class="text-600">
                    {{ businessLabel[i] }}
                    <span class="text-red-500" *ngIf="i === 0">* </span>
                  </label>
                </span>
                
                <div class="grid">
                  <!-- Country Code -->
                  <div class="col-3 p-fluid">
                    <p-dropdown
                      [options]="countryCodeOptionsList"
                      [filter]="countryCodeOptionsList?.length > 5"
                      formControlName="code"
                      [editable]="true"
                      (onChange)="onCountryCodeChange($event, i)"
                      optionLabel="label"
                      optionValue="value"
                      [class.ng-invalid]="getPhoneErrorMessage(i, 'code')"
                      #dropdown>
                    </p-dropdown>
                    
                    <!-- Fixed error display for country code -->
                    <small *ngIf="getPhoneErrorMessage(i, 'code')" class="p-error">
                      {{getPhoneErrorMessage(i, 'code')}}
                    </small>
                  </div>

                  <!-- Area Code -->
                  <div class="col-2 w-7rem">
                    <input
                    #areacodeInput
                      type="text"
                      pInputText
                      formControlName="areacode"
                      (input)="onAreaCodeInputChange($event, i, valueInput)"
                      class="w-full"
                      [class.ng-invalid]="getPhoneErrorMessage(i, 'areacode')"
                      
                      placeholder="Area code" />
                    
                    <!-- Fixed error display for area code -->
                    <div class="p-error" *ngIf="phone.get('areacode').invalid && (phone.get('areacode').touched || phone.get('areacode').dirty)">
                      <small class="p-error block mt-1">
                        {{ getPhoneErrorMessage(i, 'areacode') }}
                      </small>
                    </div>
                  </div>
                  
                  <div class="m-2 mt-3">-</div>
                  
                  <!-- Phone Number -->
                  <div class="col-5">
                    <input
                      #valueInput
                      type="text"
                      pInputText
                      formControlName="value"
                      (input)="getvalue()"
                      class="w-full"
                      [class.ng-invalid]="getPhoneErrorMessage(i, 'value')"
                     
                      
                      placeholder="Phone number" />
                    
                    <!-- Fixed error display for phone number -->
                   <div class="p-error" *ngIf="phone.get('value').invalid && (phone.get('value').touched || phone.get('value').dirty)">
                      <small class="p-error block mt-1">
                        {{ getPhoneErrorMessage(i, 'value') }}
                      </small>
                    </div>
                  </div>

                  <!-- Delete Button -->
                  <div class="col-1 mt-2" *ngIf="i != 0">
                    <gen-button
                      [btnIcon]="'fa fa-trash'"
                      [btnType]="'non-bg-btn'"
                      (onClick)="removePhone(i)"
                      class="mt-2"
                      [disabled]="isDisabled()">
                    </gen-button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Add Button -->
            <div class="pt-3 -ml-3">
              <gen-button
                *ngIf="this.phone.length < 3"
                [btnLabel]="'Add Other Number'"
                [btnType]="'plus-btn'"
                (onClick)="addOtherPhone()"
                [disabled]="isDisabled()">
              </gen-button>
            </div>
          </ng-container>
        </form>
        
        
       
      </div>
      
      <div class="col-4 -mt-4">
        <app-trust-email-contact-details></app-trust-email-contact-details>
      </div>
    </div>
  </ng-container>
</gen-card>